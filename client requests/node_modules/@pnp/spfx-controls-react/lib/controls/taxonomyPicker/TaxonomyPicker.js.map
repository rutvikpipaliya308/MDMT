{"version":3,"sources":["controls/taxonomyPicker/TaxonomyPicker.tsx"],"names":[],"mappings":"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","file":"controls/taxonomyPicker/TaxonomyPicker.js","sourcesContent":["import * as React from 'react';\nimport { PrimaryButton, DefaultButton, IconButton } from 'office-ui-fabric-react/lib/Button';\nimport { Panel, PanelType } from 'office-ui-fabric-react/lib/Panel';\nimport { Spinner, SpinnerType } from 'office-ui-fabric-react/lib/Spinner';\nimport { Label } from 'office-ui-fabric-react/lib/Label';\nimport TermPicker from './TermPicker';\nimport { IPickerTerms, IPickerTerm } from './ITermPicker';\nimport { ITaxonomyPickerProps, ITaxonomyPickerState } from './ITaxonomyPicker';\nimport SPTermStorePickerService from './../../services/SPTermStorePickerService';\nimport { ITermSet, ITerm } from './../../services/ISPTermStorePickerService';\nimport * as strings from 'ControlStrings';\nimport styles from './TaxonomyPicker.module.scss';\nimport { sortBy, cloneDeep, isEqual } from '@microsoft/sp-lodash-subset';\nimport uniqBy = require('lodash/uniqBy');\nimport TermParent from './TermParent';\nimport FieldErrorMessage from './ErrorMessage';\n\nimport * as telemetry from '../../common/telemetry';\n\n/**\n * Image URLs / Base64\n */\nexport const COLLAPSED_IMG = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAUCAYAAABSx2cSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjEwcrIlkgAAAIJJREFUOE/NkjEKwCAMRdu7ewZXJ/EqHkJwE9TBCwR+a6FLUQsRwYBTeD8/35wADnZVmPvY4OOYO3UNbK1FKeUWH+fRtK21hjEG3vuhQBdOKUEpBedcV6ALExFijJBSIufcFBjCVSCEACEEqpNvBmsmT+3MTnvqn/+O4+1vdtv7274APmNjtuXVz6sAAAAASUVORK5CYII='; // /_layouts/15/images/MDNCollapsed.png\nexport const EXPANDED_IMG = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAUCAYAAABSx2cSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjEwcrIlkgAAAFtJREFUOE9j/P//PwPZAKSZXEy2RrCLybV1CGjetWvX/46ODqBLUQOXoJ9BGtXU1MCYJM0wjZGRkaRpRtZIkmZ0jSRpBgUOzJ8wmqwAw5eICIb2qGYSkyfNAgwAasU+UQcFvD8AAAAASUVORK5CYII='; // /_layouts/15/images/MDNExpanded.png\nexport const GROUP_IMG = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAC9SURBVDhPY2CgNXh1qEkdiJ8D8X90TNBuJM0V6IpBhoHFgIxebKYTIwYzAMNpxGhGdsFwNoBgNEFjAWsYgOSKiorMgPgbEP/Hgj8AxXpB0Yg1gQAldYuLix8/efLkzn8s4O7du9eAan7iM+DV/v37z546der/jx8/sJkBdhVOA5qbm08ePnwYrOjQoUOkGwDU+AFowLmjR4/idwGukAYaYAkMgxfPnj27h816kDg4DPABoAI/IP6DIxZA4l0AOd9H3QXl5+cAAAAASUVORK5CYII='; // /_layouts/15/Images/EMMGroup.png\nexport const TERMSET_IMG = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACaSURBVDhPrZLRCcAgDERdpZMIjuQA7uWH4CqdxMY0EQtNjKWB0A/77sxF55SKMTalk8a61lqCFqsLiwKac84ZRUUBi7MoYHVmAfjfjzE6vJqZQfie0AcwBQVW8ATi7AR7zGGGNSE6Q2cyLSPIjRswjO7qKhcPDN2hK46w05wZMcEUIG+HrzzcrRsQBIJ5hS8C9fGAPmRwu/9RFxW6L8CM4Ry8AAAAAElFTkSuQmCC'; // /_layouts/15/Images/EMMTermSet.png\nexport const TERM_IMG = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACzSURBVDhPY2AYNKCoqIgTiOcD8X8S8F6wB4Aa1IH4akNDw+mPHz++/E8EuHTp0jmQRSDNCcXFxa/XrVt3gAh9KEpgBvx/9OjRLVI1g9TDDYBp3rlz5//Kysr/IJoYgGEASPPatWsbQDQxAMOAbdu2gZ0FookBcAOePHlyhxgN6GqQY+Hdhg0bDpJqCNgAaDrQAnJuNDY2nvr06dMbYgw6e/bsabgBUEN4yEiJ2wdNViLfIQC3sTh2vtJcswAAAABJRU5ErkJggg==';\n\n/**\n * Renders the controls for PropertyFieldTermPicker component\n */\nexport class TaxonomyPicker extends React.Component<ITaxonomyPickerProps, ITaxonomyPickerState> {\n  private termsService: SPTermStorePickerService;\n  private previousValues: IPickerTerms = [];\n  private cancel: boolean = true;\n\n  /**\n   * Constructor method\n   */\n  constructor(props: ITaxonomyPickerProps) {\n    super(props);\n\n    telemetry.track('ReactTaxonomyPicker');\n\n    this.state = {\n      activeNodes: this.props.initialValues || [],\n      termSetAndTerms: null,\n      loaded: false,\n      openPanel: false,\n      errorMessage: props.errorMessage\n    };\n\n    this.onOpenPanel = this.onOpenPanel.bind(this);\n    this.onClosePanel = this.onClosePanel.bind(this);\n    this.onSave = this.onSave.bind(this);\n    this.termsChanged = this.termsChanged.bind(this);\n    this.termsFromPickerChanged = this.termsFromPickerChanged.bind(this);\n    this.termsService = new SPTermStorePickerService(this.props, this.props.context);\n  }\n\n  /**\n   * componentDidMount lifecycle hook\n   */\n  public componentDidMount() {\n    this.validateTerms();\n  }\n\n  /**\n   * componentWillMount lifecycle hook\n   */\n  public componentWillMount(): void {\n    this.setState({\n      activeNodes: this.props.initialValues || []\n    });\n  }\n\n  /**\n   * componentWillUpdate lifecycle hook\n   */\n  public async componentDidUpdate(prevProps: ITaxonomyPickerProps): Promise<void> {\n    let newState: ITaxonomyPickerState | undefined;\n    // Check if the initial values objects are not equal, if that is the case, data can be refreshed\n    if (!isEqual(this.props.initialValues, prevProps.initialValues)) {\n      newState = {\n        activeNodes: this.props.initialValues || []\n      };\n    }\n\n    if (this.props.errorMessage) {\n      if (!newState) {\n        newState = {};\n      }\n\n      newState.errorMessage = this.props.errorMessage;\n    }\n  }\n\n  /**\n  * it checks, if all entries still exist in term store. if allowMultipleSelections is true. it have to validate all values\n  */\n  private async validateTerms(): Promise<void> {\n\n    const {\n      hideDeprecatedTags,\n      hideTagsNotAvailableForTagging,\n      initialValues,\n      validateOnLoad,\n      termsetNameOrID\n    } = this.props;\n\n    let isValidateOnLoad = validateOnLoad && initialValues && initialValues.length >= 1;\n    if (isValidateOnLoad) {\n\n      const notFoundTerms: string[] = [];\n      const notFoundTermIds: string[] = [];\n\n      const termSet = await this.termsService.getAllTerms(termsetNameOrID, hideDeprecatedTags, hideTagsNotAvailableForTagging);\n      const allTerms = termSet.Terms;\n\n      for (let i = 0, len = initialValues.length; i < len; i++) {\n        const pickerTerm = initialValues[i];\n\n        if (!allTerms.filter(t => t.Id === pickerTerm.key).length) {\n          notFoundTerms.push(pickerTerm.name);\n          notFoundTermIds.push(pickerTerm.key);\n        }\n      }\n\n      if (notFoundTerms.length) {\n        this.setState({\n          internalErrorMessage: strings.TaxonomyPickerTermsNotFound.replace('{0}', notFoundTerms.join(', ')),\n          invalidNodeIds: notFoundTermIds\n        });\n      }\n    }\n  }\n\n  /**\n   * Loads the list from SharePoint current web site\n   */\n  private loadTermStores(): void {\n\n\n    if (this.props.termActions && this.props.termActions.initialize) {\n      this.props.termActions.initialize(this.termsService);\n      // this.props.termActions.actions.forEach(x => {\n      //   x.initialize(this.termsService);\n      // });\n    }\n\n    this.termsService.getAllTerms(this.props.termsetNameOrID, this.props.hideDeprecatedTags, this.props.hideTagsNotAvailableForTagging).then((response: ITermSet) => {\n      // Check if a response was retrieved\n      let termSetAndTerms = response ? response : null;\n      this.setState({\n        termSetAndTerms,\n        loaded: true\n      });\n    });\n  }\n\n  /**\n   * Force update of the taxonomy tree - required by term action in case the term has been added, deleted or moved.\n   */\n  private async updateTaxonomyTree(): Promise<void> {\n    const termSetAndTerms = await this.termsService.getAllTerms(this.props.termsetNameOrID, this.props.hideDeprecatedTags, this.props.hideTagsNotAvailableForTagging);\n\n    this.setState({\n      termSetAndTerms\n    });\n  }\n\n  /**\n   * Open the right Panel\n   */\n  private onOpenPanel(): void {\n    if (this.props.disabled === true) {\n      return;\n    }\n\n    // Store the current code value\n    this.previousValues = cloneDeep(this.state.activeNodes);\n    this.cancel = true;\n\n    this.loadTermStores();\n\n    this.setState({\n      openPanel: true,\n      loaded: false\n    });\n  }\n\n  /**\n   * Close the panel\n   */\n  private onClosePanel(): void {\n\n    this.setState(() => {\n      const newState: ITaxonomyPickerState = {\n        openPanel: false,\n        loaded: false\n      };\n\n      // Check if the property has to be reset\n      if (this.cancel) {\n        newState.activeNodes = this.previousValues;\n      }\n\n      return newState;\n    });\n  }\n\n  /**\n   * On save click action\n   */\n  private onSave(): void {\n    this.cancel = false;\n    this.onClosePanel();\n\n    this.validate(this.state.activeNodes);\n  }\n\n  /**\n   * Clicks on a node\n   * @param node\n   */\n  private termsChanged(term: ITerm, checked: boolean): void {\n\n    let activeNodes = this.state.activeNodes;\n    if (typeof term === 'undefined' || term === null) {\n      return;\n    }\n\n    // Term item to add to the active nodes array\n    const termItem = {\n      name: term.Name,\n      key: term.Id,\n      path: term.PathOfTerm,\n      termSet: term.TermSet.Id\n    };\n\n    // Check if the term is checked or unchecked\n    if (checked) {\n      // Check if it is allowed to select multiple terms\n      if (this.props.allowMultipleSelections) {\n        // Add the checked term\n        activeNodes.push(termItem);\n        // Filter out the duplicate terms\n        activeNodes = uniqBy(activeNodes, 'key');\n      } else {\n        // Only store the current selected item\n        activeNodes = [termItem];\n      }\n    } else {\n      // Remove the term from the list of active nodes\n      activeNodes = activeNodes.filter(item => item.key !== term.Id);\n    }\n    // Sort all active nodes\n    activeNodes = sortBy(activeNodes, 'path');\n    // Update the current state\n    this.setState({\n      activeNodes: activeNodes\n    });\n  }\n\n  /**\n * Fires When Items Changed in TermPicker\n * @param node\n */\n  private termsFromPickerChanged(terms: IPickerTerms) {\n    this.setState({\n      activeNodes: terms\n    });\n\n    this.validate(terms);\n  }\n\n\n  /**\n   * Gets the given node position in the active nodes collection\n   * @param node\n   */\n  private getSelectedNodePosition(node: IPickerTerm): number {\n    for (let i = 0; i < this.state.activeNodes.length; i++) {\n      if (node.key === this.state.activeNodes[i].key) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * TermSet selection handler\n   * @param termSet\n   * @param isChecked\n   */\n  private termSetSelectedChange = (termSet: ITermSet, isChecked: boolean) => {\n    const ts: ITermSet = { ...termSet };\n    // Clean /Guid.../ from the ID\n    ts.Id = this.termsService.cleanGuid(ts.Id);\n    // Create a term for the termset\n    const term: ITerm = {\n      Name: ts.Name,\n      Id: ts.Id,\n      TermSet: ts,\n      PathOfTerm: \"\",\n      _ObjectType_: ts._ObjectType_,\n      _ObjectIdentity_: ts._ObjectIdentity_,\n      Description: ts.Description,\n      IsDeprecated: null,\n      IsAvailableForTagging: null,\n      IsRoot: null\n    };\n\n    // Trigger the normal change event\n    this.termsChanged(term, isChecked);\n  }\n\n  private validate = async (value: IPickerTerms): Promise<void> => {\n\n    //\n    // checking if there are any invalid nodes left after initial validation\n    //\n    if (this.state.invalidNodeIds) {\n      const changedInvalidNodeIds = this.state.invalidNodeIds.filter(id => {\n        return !!value.filter(term => term.key === id).length;\n      });\n\n      let internalErrorMessage = changedInvalidNodeIds.length ? this.state.internalErrorMessage : '';\n\n      this.setState({\n        invalidNodeIds: changedInvalidNodeIds,\n        internalErrorMessage: internalErrorMessage\n      });\n    }\n\n    if (this.props.errorMessage || !this.props.onGetErrorMessage) { // ignoring all onGetErrorMessage logic\n      this.validated(value);\n      return;\n    }\n\n    const result: string | PromiseLike<string> = this.props.onGetErrorMessage(value || []);\n\n    if (!result) {\n      this.validated(value);\n      return;\n    }\n\n    if (typeof result === 'string') {\n      if (!result) {\n        this.validated(value);\n      }\n      else {\n        this.setState({\n          errorMessage: result\n        });\n      }\n    }\n    else {\n      try {\n        const resolvedResult = await result;\n\n        if (!resolvedResult) {\n          this.validated(value);\n        }\n        else {\n          this.setState({\n            errorMessage: resolvedResult\n          });\n        }\n      }\n      catch (err) {\n        this.validated(value);\n      }\n    }\n  }\n\n  private validated = (value: IPickerTerms): void => {\n    this.props.onChange(value);\n  }\n\n  /**\n   * Renders the SPListpicker controls with Office UI  Fabric\n   */\n  public render(): JSX.Element {\n    const {\n      label,\n      context,\n      disabled,\n      isTermSetSelectable,\n      allowMultipleSelections,\n      disabledTermIds, disableChildrenOfDisabledParents,\n      placeholder,\n      panelTitle,\n      anchorId,\n      termActions,\n      required\n    } = this.props;\n\n    const {\n      activeNodes,\n      errorMessage,\n      internalErrorMessage,\n      openPanel,\n      loaded,\n      termSetAndTerms\n    } = this.state;\n\n    return (\n      <div>\n        {label && <Label required={required}>{label}</Label>}\n        <div className={styles.termField}>\n          <div className={styles.termFieldInput}>\n            <TermPicker\n              context={context}\n              termPickerHostProps={this.props}\n              disabled={disabled}\n              value={activeNodes}\n              isTermSetSelectable={isTermSetSelectable}\n              onChanged={this.termsFromPickerChanged}\n              allowMultipleSelections={allowMultipleSelections}\n              disabledTermIds={disabledTermIds}\n              disableChildrenOfDisabledParents={disableChildrenOfDisabledParents}\n              placeholder={placeholder} />\n          </div>\n          <div className={styles.termFieldButton}>\n            <IconButton disabled={disabled} iconProps={{ iconName: 'Tag' }} onClick={this.onOpenPanel} />\n          </div>\n        </div>\n\n        <FieldErrorMessage errorMessage={errorMessage || internalErrorMessage} />\n\n        <Panel\n          isOpen={openPanel}\n          hasCloseButton={true}\n          onDismiss={this.onClosePanel}\n          isLightDismiss={true}\n          type={PanelType.medium}\n          headerText={panelTitle}\n          onRenderFooterContent={() => {\n            return (\n              <div className={styles.actions}>\n                <PrimaryButton iconProps={{ iconName: 'Save' }} text={strings.SaveButtonLabel} value=\"Save\" onClick={this.onSave} />\n                <DefaultButton iconProps={{ iconName: 'Cancel' }} text={strings.CancelButtonLabel} value=\"Cancel\" onClick={this.onClosePanel} />\n              </div>\n            );\n          }}>\n\n          {\n            /* Show spinner in the panel while retrieving terms */\n            loaded === false ? <Spinner type={SpinnerType.normal} /> : ''\n          }\n          {\n            loaded === true && termSetAndTerms && (\n              <div key={termSetAndTerms.Id} >\n                <h3>{termSetAndTerms.Name}</h3>\n                <TermParent anchorId={anchorId}\n                  autoExpand={null}\n                  termset={termSetAndTerms}\n                  isTermSetSelectable={isTermSetSelectable}\n                  termSetSelectedChange={this.termSetSelectedChange}\n                  activeNodes={activeNodes}\n                  disabledTermIds={disabledTermIds}\n                  disableChildrenOfDisabledParents={disableChildrenOfDisabledParents}\n                  changedCallback={this.termsChanged}\n                  multiSelection={allowMultipleSelections}\n                  spTermService={this.termsService}\n\n                  updateTaxonomyTree={this.updateTaxonomyTree}\n                  termActions={termActions}\n                />\n              </div>\n            )\n          }\n        </Panel>\n      </div >\n    );\n  }\n}\n"],"sourceRoot":"../../../src"}