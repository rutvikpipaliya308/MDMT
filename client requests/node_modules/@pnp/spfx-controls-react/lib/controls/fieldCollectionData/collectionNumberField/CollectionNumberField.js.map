{"version":3,"sources":["controls/fieldCollectionData/collectionNumberField/CollectionNumberField.tsx"],"names":[],"mappings":"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","file":"controls/fieldCollectionData/collectionNumberField/CollectionNumberField.js","sourcesContent":["import * as React from 'react';\nimport styles from '../FieldCollectionData.module.scss';\nimport { Async } from 'office-ui-fabric-react/lib/Utilities';\nimport { ICollectionNumberFieldProps, ICollectionNumberFieldState } from '.';\nimport { ICustomCollectionField } from '..';\nimport { isEqual } from '@microsoft/sp-lodash-subset';\n\nexport class CollectionNumberField extends React.Component<ICollectionNumberFieldProps, ICollectionNumberFieldState> {\n  private async: Async;\n  private delayedValidate: (field: ICustomCollectionField, inputVal: number) => void;\n\n  constructor(props: ICollectionNumberFieldProps) {\n    super(props);\n\n    this.state = {\n      value: null,\n      errorMessage: ''\n    };\n\n    this.async = new Async(this);\n    this.delayedValidate = this.async.debounce(this.valueValidation, (this.props.field.deferredValidationTime || this.props.field.deferredValidationTime >= 0) ? this.props.field.deferredValidationTime : 200);\n  }\n\n  /**\n   * componentWillMount lifecycle hook\n   */\n  public componentWillMount(): void {\n    this.setState({\n      value: this.props.item[this.props.field.id]\n    });\n    this.valueChange(this.props.field, this.props.item[this.props.field.id]);\n  }\n\n  /**\n   * componentWillUpdate lifecycle hook\n   *\n   * @param nextProps\n   * @param nextState\n   */\n  public componentWillUpdate(nextProps: ICollectionNumberFieldProps, nextState: ICollectionNumberFieldState): void {\n    if (!isEqual(nextProps.item, this.props.item)) {\n      this.setState({\n        value: nextProps.item[nextProps.field.id]\n      });\n    }\n  }\n\n  /**\n   * Value change event handler\n   *\n   * @param field\n   * @param value\n   */\n  private valueChange = (field: ICustomCollectionField, value: string | number) => {\n    const inputVal = typeof value === \"string\" ? parseInt(value) : value;\n    this.setState({\n      value: inputVal\n    });\n    this.props.fOnValueChange(field.id, value);\n    this.delayedValidate(field, inputVal);\n  }\n\n  /**\n   * Delayed field validation\n   */\n  private valueValidation = async (field: ICustomCollectionField, value: number) => {\n    // debugger;\n    const validation = await this.props.fValidation(field, value);\n    // Update the error message\n    this.setState({\n      errorMessage: validation\n    });\n  }\n\n  /**\n   * Default React render method\n   */\n  public render(): React.ReactElement<ICollectionNumberFieldProps> {\n    return (\n      <div className={`FieldCollectionData__panel__number-field ${styles.numberField} ${this.state.errorMessage ? styles.invalidField : \"\"}`}>\n        <input type=\"number\"\n               role=\"spinbutton\"\n               placeholder={this.props.field.placeholder || this.props.field.title}\n               aria-valuemax=\"99999\"\n               aria-valuemin=\"-999999\"\n               aria-valuenow={this.props.item[this.props.field.id] || ''}\n               aria-invalid={!!this.state.errorMessage}\n               value={this.state.value || ''}\n               onChange={async (ev) => await this.valueChange(this.props.field, ev.target.value)}\n               disabled={this.props.disableEdit} />\n      </div>\n    );\n  }\n}\n"],"sourceRoot":"../../../../src"}